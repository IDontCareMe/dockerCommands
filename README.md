# dockerCommands
**Just tiny list of docker's commands/Шпаргалка по Docker :whale: :new_moon_with_face:**

### Оглавление
1. [Images/ Работа с образами](#images-работа-с-образами)
2. [Containers/ Работа с контейнерами](#containers-работа-с-контейнерами)
3. [Dockerfile/ Создание собственных образов](#dockerfile-создание-собственных-образов)

### Images/ Работа с образами
1) Скачать образ(Image) можно командой pull:
```
$ docker pull ubuntu
```

2) Посмотреть образы, скаченные на локальную машину, можно командой Images или image ls:
```
$ docker images
$ docker image ls
```

3) Удалить ненужные образы можно с помощью команды rmi:
```
$ docker rmi id_образа
```

4) Удалить все неиспользуемые образы можно командой image prun:
```
$ docker image prun
```

5) Запустить образ(Image) можно командой run:
```
$ docker run имя_образа или id_образа
```
 >Ключ -it ( --interactive --tty) - оставить возможность взаимодействия с контейнером через терминал
```
$ docker run -it имя_образа или id_образа ...
```
 >Ключ -p указание порта -p порт_хоста:порт_контейнера
```
$ docker run -p 3000:3000 имя_образа или id_образа ...
```
>Ключ -d (--detach) - detached mode запуск в фоновом режиме
```
$ docker run -d имя_образа или id_образа ...
```
>Ключ --name задаёт имя контейнеру
```
$ docker run --name=имя_контейнера имя_образа или id_образа ...
```
>Ключ --rm удалит контейнер после его остановки
```
$ docker run --rm имя_образа или id_образа ...
```
>Ключ -e задаёт значение переменным окружения
```
$ docker run -e PORT=80 имя_образа или id_образа ...
```
 
 ### Containers/ Работа с контейнерами
 
1) Посмотреть запущенные контейнеры можно командой ps:
```
$ docker ps -a
```
>(ключ -a показывает вообще все контейнеры, даже приостановленные)

2) Удалить приостановленные контейнеры можно командой rm:
```
$ docker rm имя_контейнера или id_контейнера (можно несколько id)
```

3) Удалить **все** приостановленные контейнеры можно командой container prune:
```
$ docker container prune (Необходимо нажать y(yes) для подтверждения)
```

4) Запуск приостановленного **контейнера** можно осуществить по команде Start:
```
$ docker start имя_контейнера или id_контейнера
```

5) Чтобы подключиться к контейнеру во время работы в нём приложения используется команда attach:
```
$ docker attach имя_контейнера или id_контейнера
```

6) Логи и вывод в консоль сообщений в контейнере осуществляется командой logs
```
$ docker logs имя_контейнера или id_контейнера
```

### Dockerfile/ Создание собственных образов

Инструкции для сборки собственного образа docker в Dockerfile (с большой буквы без раcширения файла)
Создаём новый Image
Частный случай для приложения
FROM название image на основе которого будет приложение
(Если этот оброз есть локально, то используется локальный образ, если нет, то качается нужный образ)
COPY копирует файлы и папки в образ
COPY . - копирует корень проекта ( где лежит докер-файл)
Дальше необходимо указать в какое место необходимо скопировать файлы
COPY . . (из корня проекта в корень образа)

WORKDIR - рабочая дириктория для проекта в образе
WORKDIR /app (тогда COPY . . будет копировать файлы в WORKDIR, т.е. в /app)

RUN запускает что-то при сборке
CMD запускается при запуске контейнера

EXPOSE указывает какой порт используется для запуска приложения

==========================================================================

FROM node

WORKDIR /app

COPY . .

RUN npm install

EXPOSE 3000

CMD ["node", "app.js"]

==========================================================================

Сборка собственного образа
docker build . (Если в текущей дириктории)
Ключ -t позволяет задать имя создаваемому образу а также тэг(по-умолчанию тэг latest) через : !!!Важно всё в нижнем регистре
docker build -t newname:newtag .

===========================================================================
Если необходимо исключить какие-то файлы из копируемых в образ
можно использовать файл .dockerignore

node_modules
.git
Dockerfile
.idea


11. Чтобы узнать ip виртуальной машины 
docker-machine ip

# Заключение

[:point_up:Оглавление](#оглавление)

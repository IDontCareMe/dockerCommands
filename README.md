# dockerCommands
**Just tiny list of docker's commands/Шпаргалка по Docker :whale: :new_moon_with_face:**

## Оглавление

1) [test](Test)
2) [Гугль](https://google.com)

### Images/ Работа с образами
1) Скачать образ(Image) командой pull:
```
$ docker pull ubuntu
```

2) Посмотреть образы, скаченные на локальную машину можно командой Images или image ls:
```
$ docker images
$ docker image ls
```

3) Удалить ненужные образы можно с помощью команды rmi:
```
$ docker rmi id_образа
```

4) Удалить все неиспользуемые образы можно командой image prun:
```
$ docker image prun
```

3. Запуск Image командой run
docker run имя или id
Ключ -it как interective - запускается сам по себе
docker run -it имя или id
Ключ -p указание порта -p локальный_порт:порт_контейнера
docker run -p 3000:3000
Ключ -d detached mode запуск в фоновом режиме
Ключ --name задаёт имя контейнеру
Ключ --rm удалит контейнер после его остановки
Ключ -e задаёт значение переменным окружения
-e PORT=80
 
4. Посмотреть запущенные контейнеры командой ps
docker ps -a(ключ -a показывает вообще все контейнеры, даже приостановленные)

5. Удалить приостановленные контейнеры командой rm
docker rm имя или id (можно несколько id)

6. Удалить все приостановленные контейнеры командой container prune
docker container prune (Необходимо нажать y(yes) для подтверждения)

7. Запуск Контейнера по команде Start
docker start имя или Id контейнера

8. Чтобы подключиться к контейнеру во время работы в нём приложения команда attach
docker attach id контейнера

9. Логи и вывод в консоль в контейнере командой logs
docker logs id контейнера



11. Чтобы узнать ip виртуальной машины 
docker-machine ip

===========================================================================
Инструкции для docker в Dockerfile (с большой буквы без разширения файла)
Создаём новый Image
Частный случай для приложения
FROM название image на основе которого будет приложение
(Если этот оброз есть локально, то используется локальный образ, если нет, то качается нужный образ)
COPY копирует файлы и папки в образ
COPY . - копирует корень проекта ( где лежит докер-файл)
Дальше необходимо указать в какое место необходимо скопировать файлы
COPY . . (из корня проекта в корень образа)

WORKDIR - рабочая дириктория для проекта в образе
WORKDIR /app (тогда COPY . . будет копировать файлы в WORKDIR, т.е. в /app)

RUN запускает что-то при сборке
CMD запускается при запуске контейнера

EXPOSE указывает какой порт используется для запуска приложения

==========================================================================

FROM node

WORKDIR /app

COPY . .

RUN npm install

EXPOSE 3000

CMD ["node", "app.js"]

==========================================================================

Сборка собственного образа
docker build . (Если в текущей дириктории)
Ключ -t позволяет задать имя создаваемому образу а также тэг(по-умолчанию тэг latest) через : !!!Важно всё в нижнем регистре
docker build -t newname:newtag .

===========================================================================
Если необходимо исключить какие-то файлы из копируемых в образ
можно использовать файл .dockerignore

node_modules
.git
Dockerfile
.idea

# Test

[Оглавление](Оглавление)
